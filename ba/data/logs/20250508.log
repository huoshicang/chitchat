2025/05/08 10:13     INFO: [uvicorn.error]	Started server process [2952]
2025/05/08 10:13     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 10:13     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 10:14     INFO: [uvicorn.error]	Shutting down
2025/05/08 10:14     INFO: [uvicorn.error]	Started server process [9076]
2025/05/08 10:14     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 10:14     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 10:14     INFO: [uvicorn.error]	('127.0.0.1', 4139) - "WebSocket /ws" [accepted]
2025/05/08 10:14     INFO: [uvicorn.error]	connection open
2025/05/08 10:15    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 10:15     INFO: [uvicorn.error]	connection closed
2025/05/08 10:18     INFO: [uvicorn.error]	Shutting down
2025/05/08 10:18     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 10:18     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 10:18     INFO: [uvicorn.error]	Finished server process [9076]
2025/05/08 10:18     INFO: [uvicorn.error]	Started server process [32516]
2025/05/08 10:18     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 10:18     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 10:23     INFO: [uvicorn.error]	('127.0.0.1', 4426) - "WebSocket /ws" [accepted]
2025/05/08 10:23     INFO: [uvicorn.error]	connection open
2025/05/08 10:23    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 10:23     INFO: [uvicorn.error]	connection closed
2025/05/08 10:26     INFO: [uvicorn.error]	Shutting down
2025/05/08 10:26     INFO: [uvicorn.error]	Started server process [1028]
2025/05/08 10:26     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 10:26     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 10:26     INFO: [uvicorn.error]	('127.0.0.1', 4566) - "WebSocket /ws" [accepted]
2025/05/08 10:26     INFO: [uvicorn.error]	connection open
2025/05/08 10:26    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 10:26     INFO: [uvicorn.error]	connection closed
2025/05/08 10:30     INFO: [uvicorn.error]	Shutting down
2025/05/08 10:30     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 10:30     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 10:30     INFO: [uvicorn.error]	Finished server process [1028]
2025/05/08 10:30     INFO: [uvicorn.error]	Started server process [5220]
2025/05/08 10:30     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 10:30     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 10:31     INFO: [uvicorn.error]	Shutting down
2025/05/08 10:31     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 10:31     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 10:31     INFO: [uvicorn.error]	Finished server process [5220]
2025/05/08 10:53     INFO: [uvicorn.error]	Started server process [3992]
2025/05/08 10:53     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 10:53     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 10:55     INFO: [uvicorn.error]	('127.0.0.1', 5544) - "WebSocket /ws" [accepted]
2025/05/08 10:55     INFO: [uvicorn.error]	connection open
2025/05/08 10:55    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 10:55     INFO: [uvicorn.error]	connection closed
2025/05/08 10:55     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:37     INFO: [uvicorn.error]	Started server process [3604]
2025/05/08 13:37     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:37     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:37     INFO: [哎.utils.auth]	开始处理用户认证请求，用户ID：aab3d6920ccb01c8a375164e94db90d9
2025/05/08 13:37     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 13:37     INFO: [哎.database.mongo]	连接已关闭
2025/05/08 13:37     INFO: [哎.utils.auth]	创建新用户：aab3d6920ccb01c8a375164e94db90d9，状态为：InsertOneResult(ObjectId('681c431503c5e53987521c0a'), acknowledged=True)
2025/05/08 13:37     INFO: [哎.utils.auth]	用户 aab3d6920ccb01c8a375164e94db90d9 认证成功
2025/05/08 13:37    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 299, in app
    |     raise e
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 294, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 193, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\concurrency.py", line 40, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func, *args)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2134, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 851, in run
    |     result = context.run(func, *args)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 49, in root
    |     return judgment_auth(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\utils\auth.py", line 44, in judgment_auth
    |     return JSONResponse(
    |            ^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\responses.py", line 180, in __init__
    |     super().__init__(content, status_code, headers, media_type, background)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\responses.py", line 39, in __init__
    |     self.body = self.render(content)
    |                 ^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\responses.py", line 183, in render
    |     return json.dumps(
    |            ^^^^^^^^^^^
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 238, in dumps
    |     **kw).encode(obj)
    |           ^^^^^^^^^^^
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    |     chunks = self.iterencode(o, _one_shot=True)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    |     return _iterencode(o, 0)
    |            ^^^^^^^^^^^^^^^^^
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    | TypeError: Object of type InsertOneResult is not JSON serializable
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 299, in app
    raise e
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\concurrency.py", line 40, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2134, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 851, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 49, in root
    return judgment_auth(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\utils\auth.py", line 44, in judgment_auth
    return JSONResponse(
           ^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\responses.py", line 180, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\responses.py", line 39, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\responses.py", line 183, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type InsertOneResult is not JSON serializable
2025/05/08 13:37     INFO: [哎.utils.auth]	开始处理用户认证请求，用户ID：aab3d6920ccb01c8a375164e94db90d9
2025/05/08 13:37     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 13:37    ERROR: [哎.database.mongo]	查询数据失败: Cannot use MongoClient after close
2025/05/08 13:37    ERROR: [哎.database.mongo]	插入数据失败: Cannot use MongoClient after close
2025/05/08 13:37     INFO: [哎.database.mongo]	连接已关闭
2025/05/08 13:37     INFO: [哎.utils.auth]	创建新用户：aab3d6920ccb01c8a375164e94db90d9，状态为：False
2025/05/08 13:37     INFO: [哎.utils.auth]	用户 aab3d6920ccb01c8a375164e94db90d9 认证成功
2025/05/08 13:37     INFO: [哎.main]	GET http://127.0.0.1:9000/auth 200 0.004999876022338867s
2025/05/08 13:37     INFO: [哎.main]	GET http://127.0.0.1:9000/auth 200 0.007995843887329102s
2025/05/08 13:38     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:38     INFO: [uvicorn.error]	Started server process [24424]
2025/05/08 13:38     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:38     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:38     INFO: [哎.utils.auth]	开始处理用户认证请求，用户ID：aab3d6920ccb01c8a375164e94db90d9
2025/05/08 13:38     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 13:38    DEBUG: [哎.utils.auth]	用户已存在，用户信息：{'_id': '681c431503c5e53987521c0a', 'user_id': 'aab3d6920ccb01c8a375164e94db90d9', 'setting': 'aab3d6920ccb01c8a375164e94db90d9'}
2025/05/08 13:38     INFO: [哎.utils.auth]	用户 aab3d6920ccb01c8a375164e94db90d9 认证成功
2025/05/08 13:38     INFO: [哎.main]	GET http://127.0.0.1:9000/auth 200 0.2321012020111084s
2025/05/08 13:38     INFO: [哎.main]	GET http://127.0.0.1:9000/auth 200 0.23310089111328125s
2025/05/08 13:39     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:39     INFO: [uvicorn.error]	Started server process [4244]
2025/05/08 13:39     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:39     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:39     INFO: [uvicorn.error]	('127.0.0.1', 11287) - "WebSocket /ws" [accepted]
2025/05/08 13:39     INFO: [uvicorn.error]	connection open
2025/05/08 13:39    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 13:39     INFO: [uvicorn.error]	connection closed
2025/05/08 13:40     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:41     INFO: [uvicorn.error]	Started server process [20932]
2025/05/08 13:41     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:41     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:41     INFO: [uvicorn.error]	('127.0.0.1', 11391) - "WebSocket /ws" [accepted]
2025/05/08 13:41     INFO: [uvicorn.error]	connection open
2025/05/08 13:41    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 13:41     INFO: [uvicorn.error]	connection closed
2025/05/08 13:42     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:42     INFO: [uvicorn.error]	Started server process [27696]
2025/05/08 13:42     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:42     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:42     INFO: [uvicorn.error]	('127.0.0.1', 11442) - "WebSocket /ws" [accepted]
2025/05/08 13:42     INFO: [uvicorn.error]	connection open
2025/05/08 13:42    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 13:42     INFO: [uvicorn.error]	connection closed
2025/05/08 13:42     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:43     INFO: [uvicorn.error]	Started server process [6416]
2025/05/08 13:43     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:43     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:43     INFO: [uvicorn.error]	('127.0.0.1', 11480) - "WebSocket /ws" [accepted]
2025/05/08 13:43     INFO: [uvicorn.error]	connection open
2025/05/08 13:43    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 13:43     INFO: [uvicorn.error]	connection closed
2025/05/08 13:43     INFO: [uvicorn.error]	('127.0.0.1', 11496) - "WebSocket /ws" [accepted]
2025/05/08 13:43     INFO: [uvicorn.error]	connection open
2025/05/08 13:43    ERROR: [哎.services.send_message]	请求 AI 时发生错误: 'coroutine' object has no attribute 'append'
2025/05/08 13:43     INFO: [uvicorn.error]	connection closed
2025/05/08 13:43     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:43     INFO: [uvicorn.error]	Started server process [30352]
2025/05/08 13:43     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:43     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:43     INFO: [uvicorn.error]	('127.0.0.1', 11517) - "WebSocket /ws" [accepted]
2025/05/08 13:43     INFO: [uvicorn.error]	connection open
2025/05/08 13:43    ERROR: [哎.services.send_message]	请求 AI 时发生错误: id must be an instance of (bytes, str, ObjectId), not <class 'int'>
2025/05/08 13:43     INFO: [uvicorn.error]	connection closed
2025/05/08 13:48     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:48     INFO: [uvicorn.error]	Started server process [15620]
2025/05/08 13:48     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:48     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:48     INFO: [uvicorn.error]	('127.0.0.1', 11682) - "WebSocket /ws" [accepted]
2025/05/08 13:48     INFO: [uvicorn.error]	connection open
2025/05/08 13:48     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 13:48     INFO: [哎.services.send_message]	消息插入 
2025/05/08 13:48     INFO: [uvicorn.error]	connection closed
2025/05/08 13:49     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:49     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 13:49     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 13:49     INFO: [uvicorn.error]	Finished server process [15620]
2025/05/08 13:51     INFO: [uvicorn.error]	Started server process [33340]
2025/05/08 13:51     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:51     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:53     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:53     INFO: [uvicorn.error]	Started server process [33280]
2025/05/08 13:53     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:53     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 13:54     INFO: [uvicorn.error]	('127.0.0.1', 11919) - "WebSocket /ws" [accepted]
2025/05/08 13:54     INFO: [uvicorn.error]	connection open
2025/05/08 13:54     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 13:54     INFO: [哎.services.send_message]	消息插入 
2025/05/08 13:54     INFO: [uvicorn.error]	connection closed
2025/05/08 13:57     INFO: [uvicorn.error]	Shutting down
2025/05/08 13:57     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 13:57     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 13:57     INFO: [uvicorn.error]	Finished server process [33280]
2025/05/08 13:57     INFO: [uvicorn.error]	Started server process [4336]
2025/05/08 13:57     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 13:57     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 15:10     INFO: [uvicorn.error]	Started server process [9436]
2025/05/08 15:10     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 15:10     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 15:10     INFO: [uvicorn.error]	('127.0.0.1', 2096) - "WebSocket /ws" [accepted]
2025/05/08 15:10     INFO: [uvicorn.error]	connection open
2025/05/08 15:10     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 15:10     INFO: [哎.services.send_message]	消息插入 
2025/05/08 15:10     INFO: [uvicorn.error]	connection closed
2025/05/08 15:11     INFO: [uvicorn.error]	('127.0.0.1', 2146) - "WebSocket /ws" [accepted]
2025/05/08 15:11     INFO: [uvicorn.error]	connection open
2025/05/08 15:11     INFO: [哎.services.send_message]	消息插入 
2025/05/08 15:11     INFO: [uvicorn.error]	connection closed
2025/05/08 15:11     INFO: [uvicorn.error]	Shutting down
2025/05/08 15:11     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 15:11     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 15:11     INFO: [uvicorn.error]	Finished server process [9436]
2025/05/08 15:11     INFO: [uvicorn.error]	Started server process [8460]
2025/05/08 15:11     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 15:11     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 15:11     INFO: [uvicorn.error]	('127.0.0.1', 2191) - "WebSocket /ws" [accepted]
2025/05/08 15:11     INFO: [uvicorn.error]	connection open
2025/05/08 15:11     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 15:11     INFO: [哎.services.send_message]	消息插入 
2025/05/08 15:11     INFO: [uvicorn.error]	connection closed
2025/05/08 15:12     INFO: [uvicorn.error]	('127.0.0.1', 2258) - "WebSocket /ws" [accepted]
2025/05/08 15:12     INFO: [uvicorn.error]	connection open
2025/05/08 15:12    ERROR: [哎.services.send_message]	请求 AI 时发生错误: Object of type coroutine is not JSON serializable
2025/05/08 15:12     INFO: [uvicorn.error]	connection closed
2025/05/08 15:15     INFO: [uvicorn.error]	Shutting down
2025/05/08 15:15     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 15:15     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 15:15     INFO: [uvicorn.error]	Finished server process [8460]
2025/05/08 15:15     INFO: [uvicorn.error]	Started server process [33032]
2025/05/08 15:15     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 15:15     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 15:19     INFO: [uvicorn.error]	('127.0.0.1', 2634) - "WebSocket /ws" [accepted]
2025/05/08 15:19     INFO: [uvicorn.error]	connection open
2025/05/08 15:19     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 15:19     INFO: [哎.services.send_message]	消息插入 
2025/05/08 15:19     INFO: [uvicorn.error]	connection closed
2025/05/08 15:19     INFO: [uvicorn.error]	('127.0.0.1', 2675) - "WebSocket /ws" [accepted]
2025/05/08 15:19     INFO: [uvicorn.error]	connection open
2025/05/08 15:20    ERROR: [哎.database.mongo]	更新数据失败: update only works with $ operators
2025/05/08 15:20     INFO: [哎.services.send_message]	消息保存 False
2025/05/08 15:20     INFO: [uvicorn.error]	connection closed
2025/05/08 15:33     INFO: [uvicorn.error]	Shutting down
2025/05/08 15:33     INFO: [uvicorn.error]	Started server process [12296]
2025/05/08 15:33     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 15:33     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 15:34     INFO: [uvicorn.error]	('127.0.0.1', 3361) - "WebSocket /ws" [accepted]
2025/05/08 15:34     INFO: [uvicorn.error]	connection open
2025/05/08 15:34     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 15:34     INFO: [哎.services.send_message]	消息保存 True
2025/05/08 15:34     INFO: [uvicorn.error]	connection closed
2025/05/08 16:18     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:18     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:18     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:18     INFO: [uvicorn.error]	Finished server process [12296]
2025/05/08 16:18     INFO: [uvicorn.error]	Started server process [34436]
2025/05/08 16:18     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:18     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:18     INFO: [uvicorn.error]	('127.0.0.1', 5344) - "WebSocket /ws" [accepted]
2025/05/08 16:18     INFO: [uvicorn.error]	connection open
2025/05/08 16:18     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 16:18     INFO: [哎.services.send_message]	消息插入 
2025/05/08 16:18     INFO: [uvicorn.error]	connection closed
2025/05/08 16:19     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/share 422 0.0040056705474853516s
2025/05/08 16:19     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/share 422 0.006005048751831055s
2025/05/08 16:22     INFO: [哎.services.message.get_message]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的记录成功
2025/05/08 16:22     INFO: [哎.main]	GET http://127.0.0.1:9000/api/messages/6809e6230f3f52acac1daeef 200 0.029955148696899414s
2025/05/08 16:22     INFO: [哎.main]	GET http://127.0.0.1:9000/api/messages/6809e6230f3f52acac1daeef 200 0.03095698356628418s
2025/05/08 16:22     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 16:22     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.02700066566467285s
2025/05/08 16:22     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.02800130844116211s
2025/05/08 16:24    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: '' is not a valid ObjectId, it must be a 12-byte input or a 24-character hex string
2025/05/08 16:24    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:24     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:24     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:24     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:24     INFO: [uvicorn.error]	Finished server process [34436]
2025/05/08 16:24     INFO: [uvicorn.error]	Started server process [13736]
2025/05/08 16:24     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:24     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:24    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: '' is not a valid ObjectId, it must be a 12-byte input or a 24-character hex string
2025/05/08 16:24    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:25     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 16:25     INFO: [哎.services.chat.share_chat]	681c68ed33c8971a7da8c8ac 的聊天设置分享成功
2025/05/08 16:25    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:27     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:27     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:27     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:27     INFO: [uvicorn.error]	Finished server process [13736]
2025/05/08 16:28     INFO: [uvicorn.error]	Started server process [660]
2025/05/08 16:28     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:28     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:28     INFO: [uvicorn.error]	('127.0.0.1', 5695) - "WebSocket /ws" [accepted]
2025/05/08 16:28     INFO: [uvicorn.error]	connection open
2025/05/08 16:29     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 16:29     INFO: [哎.services.send_message]	消息插入 
2025/05/08 16:29     INFO: [uvicorn.error]	connection closed
2025/05/08 16:29     INFO: [哎.services.chat.share_chat]	681c6b53079a43e8b701c21e 的聊天设置分享成功
2025/05/08 16:29    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:30     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 16:30     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.031525373458862305s
2025/05/08 16:30     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.032517433166503906s
2025/05/08 16:31     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:31     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:31     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:31     INFO: [uvicorn.error]	Finished server process [660]
2025/05/08 16:31     INFO: [uvicorn.error]	Started server process [4720]
2025/05/08 16:31     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:31     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:34     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:34     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:34     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:34     INFO: [uvicorn.error]	Finished server process [4720]
2025/05/08 16:34     INFO: [uvicorn.error]	Started server process [19520]
2025/05/08 16:34     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:34     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:34     INFO: [uvicorn.error]	('127.0.0.1', 5953) - "WebSocket /ws" [accepted]
2025/05/08 16:34     INFO: [uvicorn.error]	connection open
2025/05/08 16:34     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 16:34     INFO: [哎.services.send_message]	消息插入 
2025/05/08 16:34     INFO: [uvicorn.error]	connection closed
2025/05/08 16:35     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天设置分享成功
2025/05/08 16:35    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:36     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:36     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:36     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:36     INFO: [uvicorn.error]	Finished server process [19520]
2025/05/08 16:36     INFO: [uvicorn.error]	Started server process [33864]
2025/05/08 16:36     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:36     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:36     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 16:36     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天设置分享成功
2025/05/08 16:36    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:38     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:38     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:38     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:38     INFO: [uvicorn.error]	Finished server process [33864]
2025/05/08 16:38     INFO: [uvicorn.error]	Started server process [23676]
2025/05/08 16:38     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:38     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 16:39     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 16:39     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 16:39    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': True, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 16:39     INFO: [uvicorn.error]	Shutting down
2025/05/08 16:39     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 16:39     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 16:39     INFO: [uvicorn.error]	Finished server process [23676]
2025/05/08 16:39     INFO: [uvicorn.error]	Started server process [1172]
2025/05/08 16:39     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 16:39     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:00     INFO: [uvicorn.error]	Started server process [25484]
2025/05/08 17:00     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:00     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:01     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:01     INFO: [uvicorn.error]	Started server process [16520]
2025/05/08 17:01     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:01     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:01     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:01     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:01    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 2 validation errors for ChatResponse
data.bool
  Input should be a valid boolean [type=bool_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/bool_type
data.list[dict[any,any]]
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:01    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:02     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:02     INFO: [uvicorn.error]	Started server process [21496]
2025/05/08 17:02     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:02     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:03     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:03     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:03     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.18974590301513672s
2025/05/08 17:03     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.19074463844299316s
2025/05/08 17:04     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:04    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:04    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:06     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:06     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:06     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:06     INFO: [uvicorn.error]	Finished server process [21496]
2025/05/08 17:06     INFO: [uvicorn.error]	Started server process [5852]
2025/05/08 17:06     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:06     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:07     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:07     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:07    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:07    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:07     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:07     INFO: [uvicorn.error]	Started server process [5856]
2025/05/08 17:07     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:07     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:07     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:07     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:07    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:07    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:11     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:11     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:11     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:11     INFO: [uvicorn.error]	Finished server process [5856]
2025/05/08 17:11     INFO: [uvicorn.error]	Started server process [28796]
2025/05/08 17:11     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:11     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:11     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:11    ERROR: [哎.database.mongo]	更新数据失败: 'UpdateResult' object has no attribute '__dict__'
2025/05/08 17:11    ERROR: [哎.services.chat.share_chat]	分享 aab3d6920ccb01c8a375164e94db90d9 的记录时发生错误: 'UpdateResult' object has no attribute '__dict__'
2025/05/08 17:11    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:11    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:11     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:11     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:11     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:11     INFO: [uvicorn.error]	Finished server process [28796]
2025/05/08 17:12     INFO: [uvicorn.error]	Started server process [32432]
2025/05/08 17:12     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:12     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:12     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:15     INFO: [uvicorn.error]	Started server process [18700]
2025/05/08 17:15     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:15     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:15     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:15     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:15    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:15    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:15     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:15     INFO: [uvicorn.error]	Started server process [25772]
2025/05/08 17:15     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:15     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:16     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:16     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:16    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={'n': 1, 'nModified': 1, ...'updatedExisting': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:16    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:16     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:16    ERROR: [哎.services.chat.share_chat]	分享记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={'n': 1, 'nModified': 1, ...'updatedExisting': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:16    ERROR: [uvicorn.error]	Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 678, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    |     await route.handle(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    |     content = await serialize_response(
    |               ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    |     raise ResponseValidationError(
    | fastapi.exceptions.ResponseValidationError: 1 validation errors:
    |   {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}
    | 
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\protocols\http\h11_impl.py", line 404, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Users\27173\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_utils.py", line 91, in collapse_excgroups
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\chitchat\ba\main.py", line 67, in process_time_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 782, in app
    await route.handle(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 315, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\code_project\dialogue\backend\venv\Lib\site-packages\fastapi\routing.py", line 155, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dict_type', 'loc': ('response', 'data'), 'msg': 'Input should be a valid dictionary', 'input': None, 'url': 'https://errors.pydantic.dev/2.6/v/dict_type'}

2025/05/08 17:17     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:19     INFO: [uvicorn.error]	Started server process [3532]
2025/05/08 17:19     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:19     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:19     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:19     INFO: [哎.services.chat.share_chat]	681c6cb0a327f10fa64a8e1e 的聊天分享成功
2025/05/08 17:19     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/share?chat_id=681c6cb0a327f10fa64a8e1e 200 0.2432096004486084s
2025/05/08 17:19     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/share?chat_id=681c6cb0a327f10fa64a8e1e 200 0.24421000480651855s
2025/05/08 17:19     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 17:19    ERROR: [哎.services.chat.del_chat]	获取聊天记录时发生未知错误: 1 validation error for ChatResponse
data
  Input should be a valid list [type=list_type, input_value={'n': 0, 'nModified': 0, ...updatedExisting': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:19     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.03451275825500488s
2025/05/08 17:19     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.036514997482299805s
2025/05/08 17:24     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:24     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:24     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:24     INFO: [uvicorn.error]	Finished server process [3532]
2025/05/08 17:24     INFO: [uvicorn.error]	Started server process [15568]
2025/05/08 17:24     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:24     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:24     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:24     INFO: [uvicorn.error]	Started server process [21268]
2025/05/08 17:24     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:24     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:24     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:24     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 17:24    ERROR: [哎.services.chat.del_chat]	获取聊天记录时发生未知错误: 1 validation error for DelChat
data
  Input should be a valid list [type=list_type, input_value={'n': 0, 'nModified': 0, ...updatedExisting': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:24     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.2164013385772705s
2025/05/08 17:24     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.21740174293518066s
2025/05/08 17:24     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 17:24    ERROR: [哎.services.chat.del_chat]	获取聊天记录时发生未知错误: 1 validation error for DelChat
data
  Input should be a valid list [type=list_type, input_value={'n': 0, 'nModified': 0, ...updatedExisting': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:24     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.034745216369628906s
2025/05/08 17:24     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.034745216369628906s
2025/05/08 17:24     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:24     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:24     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:24     INFO: [uvicorn.error]	Finished server process [21268]
2025/05/08 17:31     INFO: [uvicorn.error]	Started server process [12000]
2025/05/08 17:31     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:31     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:31     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:31     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 17:31    ERROR: [哎.services.chat.del_chat]	获取聊天记录时发生未知错误: 1 validation error for DelChat
data
  Input should be a valid list [type=list_type, input_value={'n': 0, 'nModified': 0, ...updatedExisting': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:31     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.20231151580810547s
2025/05/08 17:31     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.20331168174743652s
2025/05/08 17:31     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:31     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.03200793266296387s
2025/05/08 17:31     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.03200793266296387s
2025/05/08 17:31     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:31     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.03099846839904785s
2025/05/08 17:31     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.03200101852416992s
2025/05/08 17:33     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:33     INFO: [uvicorn.error]	Started server process [20988]
2025/05/08 17:33     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:33     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:33     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:33     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:33     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.21279406547546387s
2025/05/08 17:33     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.21379303932189941s
2025/05/08 17:34     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 17:34    ERROR: [哎.services.chat.del_chat]	获取聊天记录时发生未知错误: 1 validation error for DelChat
data
  Input should be a valid list [type=list_type, input_value={'n': 0, 'nModified': 0, ...updatedExisting': False}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.6/v/list_type
2025/05/08 17:34     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.02900075912475586s
2025/05/08 17:34     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.02900075912475586s
2025/05/08 17:35     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:35     INFO: [uvicorn.error]	Started server process [24416]
2025/05/08 17:35     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:35     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:36     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:36     INFO: [哎.services.chat.del_chat]	681c6b53079a43e8b701c21e 的聊天删除成功
2025/05/08 17:36     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.23321938514709473s
2025/05/08 17:36     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6b53079a43e8b701c21e 200 0.23321938514709473s
2025/05/08 17:40     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:40     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:40     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:40     INFO: [uvicorn.error]	Finished server process [24416]
2025/05/08 17:40     INFO: [uvicorn.error]	Started server process [35752]
2025/05/08 17:40     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:40     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:41     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:41     INFO: [哎.services.chat.del_chat]	681c6cb0a327f10fa64a8e1e 的聊天删除成功
2025/05/08 17:41     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6cb0a327f10fa64a8e1e 200 0.20278167724609375s
2025/05/08 17:41     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/del?chat_id=681c6cb0a327f10fa64a8e1e 200 0.20377588272094727s
2025/05/08 17:41     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:41     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.03411126136779785s
2025/05/08 17:41     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.03411126136779785s
2025/05/08 17:41     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:41     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:41     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:41     INFO: [uvicorn.error]	Finished server process [35752]
2025/05/08 17:42     INFO: [uvicorn.error]	Started server process [20704]
2025/05/08 17:42     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:42     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:42     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:42     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:42     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.1881248950958252s
2025/05/08 17:42     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.18912220001220703s
2025/05/08 17:42     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:42     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.028569698333740234s
2025/05/08 17:42     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.028569698333740234s
2025/05/08 17:42     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:43     INFO: [uvicorn.error]	Started server process [19924]
2025/05/08 17:43     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:43     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:43     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:43     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:43     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.1851789951324463s
2025/05/08 17:43     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.1851789951324463s
2025/05/08 17:43     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:43     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:43     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:43     INFO: [uvicorn.error]	Finished server process [19924]
2025/05/08 17:43     INFO: [uvicorn.error]	Started server process [21016]
2025/05/08 17:43     INFO: [uvicorn.error]	Waiting for application startup.
2025/05/08 17:43     INFO: [uvicorn.error]	Application startup complete.
2025/05/08 17:43     INFO: [哎.database.mongo]	成功连接到MongoDB
2025/05/08 17:43     INFO: [哎.services.chat.get_chat]	获取用户 aab3d6920ccb01c8a375164e94db90d9 的聊天记录成功
2025/05/08 17:43     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.22289729118347168s
2025/05/08 17:43     INFO: [哎.main]	GET http://127.0.0.1:9000/api/chats/chat 200 0.22289729118347168s
2025/05/08 17:43     INFO: [uvicorn.error]	Shutting down
2025/05/08 17:43     INFO: [uvicorn.error]	Waiting for application shutdown.
2025/05/08 17:43     INFO: [uvicorn.error]	Application shutdown complete.
2025/05/08 17:43     INFO: [uvicorn.error]	Finished server process [21016]
